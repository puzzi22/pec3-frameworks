{"ast":null,"code":"import { formatDate } from '@angular/common';\nimport { FormControl, Validators } from '@angular/forms';\nimport * as CategoriesAction from '../../../Category/actions';\nimport * as PostsAction from '../../actions';\nimport { PostDTO } from '../../models/post.dto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@angular/common\";\nfunction PostFormComponent_form_5_div_5_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Title is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PostFormComponent_form_5_div_5_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Title can be max 55 characters long. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PostFormComponent_form_5_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_5_div_1_div_1_Template, 2, 0, \"div\", 6);\n    i0.ɵɵtemplate(2, PostFormComponent_form_5_div_5_div_1_div_2_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngClass\", \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.title.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.title.errors.maxlength);\n  }\n}\nfunction PostFormComponent_form_5_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_5_div_1_Template, 3, 3, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.title.errors && ctx_r1.isValidForm != null && !ctx_r1.isValidForm);\n  }\n}\nfunction PostFormComponent_form_5_div_10_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Description is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PostFormComponent_form_5_div_10_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Description can be max 255 characters long. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PostFormComponent_form_5_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_10_div_1_div_1_Template, 2, 0, \"div\", 6);\n    i0.ɵɵtemplate(2, PostFormComponent_form_5_div_10_div_1_div_2_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngClass\", \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.description.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.description.errors.maxlength);\n  }\n}\nfunction PostFormComponent_form_5_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_10_div_1_Template, 3, 3, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.description.errors && ctx_r2.isValidForm != null && !ctx_r2.isValidForm);\n  }\n}\nfunction PostFormComponent_form_5_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Publication date is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PostFormComponent_form_5_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, PostFormComponent_form_5_div_15_div_1_Template, 2, 0, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.publication_date.errors.required);\n  }\n}\nfunction PostFormComponent_form_5_option_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", category_r12.categoryId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r12.title, \" \");\n  }\n}\nfunction PostFormComponent_form_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function PostFormComponent_form_5_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.savePost());\n    });\n    i0.ɵɵelementStart(1, \"div\")(2, \"label\", 4);\n    i0.ɵɵtext(3, \"Title:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 5);\n    i0.ɵɵtemplate(5, PostFormComponent_form_5_div_5_Template, 2, 1, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\")(7, \"label\", 7);\n    i0.ɵɵtext(8, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 5);\n    i0.ɵɵtemplate(10, PostFormComponent_form_5_div_10_Template, 2, 1, \"div\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\")(12, \"label\", 8);\n    i0.ɵɵtext(13, \"Publication date: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 9);\n    i0.ɵɵtemplate(15, PostFormComponent_form_5_div_15_Template, 2, 2, \"div\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\")(17, \"label\", 11);\n    i0.ɵɵtext(18, \"Choose categories:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"select\", 12);\n    i0.ɵɵtemplate(20, PostFormComponent_form_5_option_20_Template, 2, 2, \"option\", 13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"button\", 14);\n    i0.ɵɵtext(22, \"SAVE\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.postForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.title.errors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.description.errors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.publication_date);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.publication_date.errors && ctx_r0.isValidForm != null && !ctx_r0.isValidForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.categories);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.categoriesList);\n  }\n}\nexport class PostFormComponent {\n  constructor(activatedRoute, formBuilder, store) {\n    this.activatedRoute = activatedRoute;\n    this.formBuilder = formBuilder;\n    this.store = store;\n    this.userId = '';\n    this.isValidForm = null;\n    this.postId = this.activatedRoute.snapshot.paramMap.get('id');\n    this.post = new PostDTO('', '', 0, 0, new Date());\n    this.isUpdateMode = false;\n    this.title = new FormControl(this.post.title, [Validators.required, Validators.maxLength(55)]);\n    this.description = new FormControl(this.post.description, [Validators.required, Validators.maxLength(255)]);\n    this.publication_date = new FormControl(formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en'), [Validators.required]);\n    this.num_likes = new FormControl(this.post.num_likes);\n    this.num_dislikes = new FormControl(this.post.num_dislikes);\n    this.categories = new FormControl([]);\n    this.postForm = this.formBuilder.group({\n      title: this.title,\n      description: this.description,\n      publication_date: this.publication_date,\n      categories: this.categories,\n      num_likes: this.num_likes,\n      num_dislikes: this.num_dislikes\n    });\n    this.store.select('auth').subscribe(auth => {\n      if (auth.credentials.user_id) {\n        this.userId = auth.credentials.user_id;\n      }\n    });\n    this.store.select('categories').subscribe(categories => {\n      this.categoriesList = categories.categories;\n    });\n    this.store.select('posts').subscribe(posts => {\n      this.post = posts.post;\n      this.title.setValue(this.post.title);\n      this.description.setValue(this.post.description);\n      this.publication_date.setValue(formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en'));\n      if (this.post.categories) {\n        let categoriesIds = [];\n        this.post.categories.forEach(cat => {\n          categoriesIds.push(cat.categoryId);\n        });\n        this.categories.setValue(categoriesIds);\n      }\n      this.num_likes.setValue(this.post.num_likes);\n      this.num_dislikes.setValue(this.post.num_dislikes);\n      this.postForm = this.formBuilder.group({\n        title: this.title,\n        description: this.description,\n        publication_date: this.publication_date,\n        categories: this.categories,\n        num_likes: this.num_likes,\n        num_dislikes: this.num_dislikes\n      });\n    });\n    this.loadCategories();\n  }\n  loadCategories() {\n    if (this.userId) {\n      this.store.dispatch(CategoriesAction.getCategoriesByUserId({\n        userId: this.userId\n      }));\n    }\n  }\n  ngOnInit() {\n    if (this.postId) {\n      this.isUpdateMode = true;\n      this.store.dispatch(PostsAction.getPostById({\n        postId: this.postId\n      }));\n    } else {\n      this.postForm.reset();\n      this.publication_date.setValue(formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en'));\n    }\n  }\n  editPost() {\n    if (this.postId) {\n      if (this.userId) {\n        this.post.userId = this.userId;\n        this.store.dispatch(PostsAction.updatePost({\n          postId: this.postId,\n          post: this.post\n        }));\n      }\n    }\n  }\n  createPost() {\n    if (this.userId) {\n      this.post.userId = this.userId;\n      this.store.dispatch(PostsAction.createPost({\n        post: this.post\n      }));\n    }\n  }\n  savePost() {\n    this.isValidForm = false;\n    if (this.postForm.invalid) {\n      return;\n    }\n    this.isValidForm = true;\n    this.post = this.postForm.value;\n    if (this.isUpdateMode) {\n      this.editPost();\n    } else {\n      this.createPost();\n    }\n  }\n}\nPostFormComponent.ɵfac = function PostFormComponent_Factory(t) {\n  return new (t || PostFormComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Store));\n};\nPostFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PostFormComponent,\n  selectors: [[\"app-post-form\"]],\n  decls: 6,\n  vars: 1,\n  consts: [[2, \"margin-left\", \"auto\", \"margin-right\", \"auto\"], [\"id\", \"postFeedback\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"for\", \"title\"], [\"type\", \"text\", 3, \"formControl\"], [4, \"ngIf\"], [\"for\", \"description\"], [\"for\", \"publicationDate\"], [\"type\", \"date\", 3, \"formControl\"], [3, \"ngClass\", 4, \"ngIf\"], [\"for\", \"categories\"], [\"multiple\", \"\", 3, \"formControl\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\"], [3, \"ngClass\"], [3, \"ngValue\"]],\n  template: function PostFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"p\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\")(3, \"h1\");\n      i0.ɵɵtext(4, \"Post form\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, PostFormComponent_form_5_Template, 23, 9, \"form\", 2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.postForm);\n    }\n  },\n  dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.SelectMultipleControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormControlDirective, i2.FormGroupDirective],\n  styles: [\".error[_ngcontent-%COMP%] {\\n  color: red;\\n}\\n\\n#postFeedback[_ngcontent-%COMP%] {\\n  visibility: hidden;\\n  min-width: 250px;\\n  color: #fff;\\n  text-align: center;\\n  border-radius: 10px;\\n  padding: 16px;\\n  z-index: 1;\\n  font-size: 14px;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n#postFeedback.requestOk[_ngcontent-%COMP%] {\\n  background-color: green;\\n}\\n\\n#postFeedback.requestKo[_ngcontent-%COMP%] {\\n  background-color: red;\\n}\\n\\n#postFeedback.show[_ngcontent-%COMP%] {\\n  visibility: visible;\\n  animation: _ngcontent-%COMP%_fadein 0.5s, _ngcontent-%COMP%_fadeout 0.5s 2.5s;\\n}\\n@keyframes _ngcontent-%COMP%_fadein {\\n  from {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n  to {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n}\\n@keyframes _ngcontent-%COMP%_fadeout {\\n  from {\\n    bottom: 30px;\\n    opacity: 1;\\n  }\\n  to {\\n    bottom: 0;\\n    opacity: 0;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvUG9zdC9jb21wb25lbnRzL3Bvc3QtZm9ybS9wb3N0LWZvcm0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxVQUFBO0FBQ0Y7O0FBRUE7RUFDRSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0VBQ0EsVUFBQTtFQUNBLGVBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0FBQ0Y7O0FBRUE7RUFDRSx1QkFBQTtBQUNGOztBQUVBO0VBQ0UscUJBQUE7QUFDRjs7QUFFQTtFQUNFLG1CQUFBO0VBRUEseUNBQUE7QUFDRjtBQWFBO0VBQ0U7SUFDRSxTQUFBO0lBQ0EsVUFBQTtFQUFGO0VBRUE7SUFDRSxZQUFBO0lBQ0EsVUFBQTtFQUFGO0FBQ0Y7QUFjQTtFQUNFO0lBQ0UsWUFBQTtJQUNBLFVBQUE7RUFGRjtFQUlBO0lBQ0UsU0FBQTtJQUNBLFVBQUE7RUFGRjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLmVycm9yIHtcclxuICBjb2xvcjogcmVkO1xyXG59XHJcblxyXG4jcG9zdEZlZWRiYWNrIHtcclxuICB2aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgbWluLXdpZHRoOiAyNTBweDtcclxuICBjb2xvcjogI2ZmZjtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICBwYWRkaW5nOiAxNnB4O1xyXG4gIHotaW5kZXg6IDE7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gIG1hcmdpbi1yaWdodDogYXV0bztcclxufVxyXG5cclxuI3Bvc3RGZWVkYmFjay5yZXF1ZXN0T2sge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IGdyZWVuO1xyXG59XHJcblxyXG4jcG9zdEZlZWRiYWNrLnJlcXVlc3RLbyB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xyXG59XHJcblxyXG4jcG9zdEZlZWRiYWNrLnNob3cge1xyXG4gIHZpc2liaWxpdHk6IHZpc2libGU7XHJcbiAgLXdlYmtpdC1hbmltYXRpb246IGZhZGVpbiAwLjVzLCBmYWRlb3V0IDAuNXMgMi41cztcclxuICBhbmltYXRpb246IGZhZGVpbiAwLjVzLCBmYWRlb3V0IDAuNXMgMi41cztcclxufVxyXG5cclxuQC13ZWJraXQta2V5ZnJhbWVzIGZhZGVpbiB7XHJcbiAgZnJvbSB7XHJcbiAgICBib3R0b206IDA7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gIH1cclxuICB0byB7XHJcbiAgICBib3R0b206IDMwcHg7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG4gIH1cclxufVxyXG5cclxuQGtleWZyYW1lcyBmYWRlaW4ge1xyXG4gIGZyb20ge1xyXG4gICAgYm90dG9tOiAwO1xyXG4gICAgb3BhY2l0eTogMDtcclxuICB9XHJcbiAgdG8ge1xyXG4gICAgYm90dG9tOiAzMHB4O1xyXG4gICAgb3BhY2l0eTogMTtcclxuICB9XHJcbn1cclxuXHJcbkAtd2Via2l0LWtleWZyYW1lcyBmYWRlb3V0IHtcclxuICBmcm9tIHtcclxuICAgIGJvdHRvbTogMzBweDtcclxuICAgIG9wYWNpdHk6IDE7XHJcbiAgfVxyXG4gIHRvIHtcclxuICAgIGJvdHRvbTogMDtcclxuICAgIG9wYWNpdHk6IDA7XHJcbiAgfVxyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGZhZGVvdXQge1xyXG4gIGZyb20ge1xyXG4gICAgYm90dG9tOiAzMHB4O1xyXG4gICAgb3BhY2l0eTogMTtcclxuICB9XHJcbiAgdG8ge1xyXG4gICAgYm90dG9tOiAwO1xyXG4gICAgb3BhY2l0eTogMDtcclxuICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["formatDate","FormControl","Validators","CategoriesAction","PostsAction","PostDTO","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","PostFormComponent_form_5_div_5_div_1_div_1_Template","PostFormComponent_form_5_div_5_div_1_div_2_Template","ɵɵproperty","ɵɵadvance","ctx_r5","title","errors","required","maxlength","PostFormComponent_form_5_div_5_div_1_Template","ctx_r1","isValidForm","PostFormComponent_form_5_div_10_div_1_div_1_Template","PostFormComponent_form_5_div_10_div_1_div_2_Template","ctx_r8","description","PostFormComponent_form_5_div_10_div_1_Template","ctx_r2","PostFormComponent_form_5_div_15_div_1_Template","ctx_r3","publication_date","category_r12","categoryId","ɵɵtextInterpolate1","ɵɵlistener","PostFormComponent_form_5_Template_form_ngSubmit_0_listener","ɵɵrestoreView","_r14","ctx_r13","ɵɵnextContext","ɵɵresetView","savePost","ɵɵelement","PostFormComponent_form_5_div_5_Template","PostFormComponent_form_5_div_10_Template","PostFormComponent_form_5_div_15_Template","PostFormComponent_form_5_option_20_Template","ctx_r0","postForm","categories","categoriesList","PostFormComponent","constructor","activatedRoute","formBuilder","store","userId","postId","snapshot","paramMap","get","post","Date","isUpdateMode","maxLength","num_likes","num_dislikes","group","select","subscribe","auth","credentials","user_id","posts","setValue","categoriesIds","forEach","cat","push","loadCategories","dispatch","getCategoriesByUserId","ngOnInit","getPostById","reset","editPost","updatePost","createPost","invalid","value","ɵɵdirectiveInject","i1","ActivatedRoute","i2","FormBuilder","i3","Store","selectors","decls","vars","consts","template","PostFormComponent_Template","rf","ctx","PostFormComponent_form_5_Template"],"sources":["/Users/pierre-antoinetremblay/Desktop/blog-uoc-project-front/src/app/Post/components/post-form/post-form.component.ts","/Users/pierre-antoinetremblay/Desktop/blog-uoc-project-front/src/app/Post/components/post-form/post-form.component.html"],"sourcesContent":["import { formatDate } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  Validators,\n} from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { AppState } from 'src/app/app.reducers';\nimport { CategoryDTO } from 'src/app/Category/models/category.dto';\nimport * as CategoriesAction from '../../../Category/actions';\nimport * as PostsAction from '../../actions';\nimport { PostDTO } from '../../models/post.dto';\n\n@Component({\n  selector: 'app-post-form',\n  templateUrl: './post-form.component.html',\n  styleUrls: ['./post-form.component.scss'],\n})\nexport class PostFormComponent implements OnInit {\n  post: PostDTO;\n  title: FormControl;\n  description: FormControl;\n  num_likes!: FormControl;\n  num_dislikes!: FormControl;\n  publication_date: FormControl;\n  categories!: FormControl;\n\n  postForm: FormGroup;\n  isValidForm: boolean | null;\n\n  private isUpdateMode: boolean;\n  private postId: string | null;\n\n  categoriesList!: CategoryDTO[];\n\n  private userId: string;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private formBuilder: FormBuilder,\n    private store: Store<AppState>\n  ) {\n    this.userId = '';\n\n    this.isValidForm = null;\n    this.postId = this.activatedRoute.snapshot.paramMap.get('id');\n    this.post = new PostDTO('', '', 0, 0, new Date());\n    this.isUpdateMode = false;\n\n    this.title = new FormControl(this.post.title, [\n      Validators.required,\n      Validators.maxLength(55),\n    ]);\n\n    this.description = new FormControl(this.post.description, [\n      Validators.required,\n      Validators.maxLength(255),\n    ]);\n\n    this.publication_date = new FormControl(\n      formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en'),\n      [Validators.required]\n    );\n\n    this.num_likes = new FormControl(this.post.num_likes);\n    this.num_dislikes = new FormControl(this.post.num_dislikes);\n\n    this.categories = new FormControl([]);\n\n    this.postForm = this.formBuilder.group({\n      title: this.title,\n      description: this.description,\n      publication_date: this.publication_date,\n      categories: this.categories,\n      num_likes: this.num_likes,\n      num_dislikes: this.num_dislikes,\n    });\n\n    this.store.select('auth').subscribe((auth) => {\n      if (auth.credentials.user_id) {\n        this.userId = auth.credentials.user_id;\n      }\n    });\n\n    this.store.select('categories').subscribe((categories) => {\n      this.categoriesList = categories.categories;\n    });\n\n    this.store.select('posts').subscribe((posts) => {\n      this.post = posts.post;\n\n      this.title.setValue(this.post.title);\n\n      this.description.setValue(this.post.description);\n\n      this.publication_date.setValue(\n        formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en')\n      );\n\n      if (this.post.categories) {\n        let categoriesIds: string[] = [];\n        this.post.categories.forEach((cat: CategoryDTO) => {\n          categoriesIds.push(cat.categoryId);\n        });\n\n        this.categories.setValue(categoriesIds);\n      }\n\n      this.num_likes.setValue(this.post.num_likes);\n      this.num_dislikes.setValue(this.post.num_dislikes);\n\n      this.postForm = this.formBuilder.group({\n        title: this.title,\n        description: this.description,\n        publication_date: this.publication_date,\n        categories: this.categories,\n        num_likes: this.num_likes,\n        num_dislikes: this.num_dislikes,\n      });\n    });\n\n    this.loadCategories();\n  }\n\n  private loadCategories(): void {\n    if (this.userId) {\n      this.store.dispatch(\n        CategoriesAction.getCategoriesByUserId({ userId: this.userId })\n      );\n    }\n  }\n\n  ngOnInit(): void {\n    if (this.postId) {\n      this.isUpdateMode = true;\n      this.store.dispatch(PostsAction.getPostById({ postId: this.postId }));\n    } else {\n      this.postForm.reset();\n      this.publication_date.setValue(\n        formatDate(this.post.publication_date, 'yyyy-MM-dd', 'en')\n      );\n    }\n  }\n\n  private editPost(): void {\n    if (this.postId) {\n      if (this.userId) {\n        this.post.userId = this.userId;\n\n        this.store.dispatch(\n          PostsAction.updatePost({\n            postId: this.postId,\n            post: this.post,\n          })\n        );\n      }\n    }\n  }\n\n  private createPost(): void {\n    if (this.userId) {\n      this.post.userId = this.userId;\n\n      this.store.dispatch(PostsAction.createPost({ post: this.post }));\n    }\n  }\n\n  savePost(): void {\n    this.isValidForm = false;\n\n    if (this.postForm.invalid) {\n      return;\n    }\n\n    this.isValidForm = true;\n    this.post = this.postForm.value;\n\n    if (this.isUpdateMode) {\n      this.editPost();\n    } else {\n      this.createPost();\n    }\n  }\n}\n","<div style=\"margin-left: auto; margin-right: auto\">\n  <p id=\"postFeedback\"></p>\n</div>\n<div>\n  <h1>Post form</h1>\n  <form *ngIf=\"postForm\" [formGroup]=\"postForm\" (ngSubmit)=\"savePost()\">\n    <div>\n      <label for=\"title\">Title:</label>\n      <input type=\"text\" [formControl]=\"title\" />\n\n      <div *ngIf=\"title.errors\">\n        <div\n          *ngIf=\"title.errors && isValidForm != null && !isValidForm\"\n          [ngClass]=\"'error'\"\n        >\n          <div *ngIf=\"title.errors.required\">Title is required</div>\n\n          <div *ngIf=\"title.errors.maxlength\">\n            Title can be max 55 characters long.\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div>\n      <label for=\"description\">Description:</label>\n      <input type=\"text\" [formControl]=\"description\" />\n\n      <div *ngIf=\"description.errors\">\n        <div\n          *ngIf=\"description.errors && isValidForm != null && !isValidForm\"\n          [ngClass]=\"'error'\"\n        >\n          <div *ngIf=\"description.errors.required\">Description is required</div>\n\n          <div *ngIf=\"description.errors.maxlength\">\n            Description can be max 255 characters long.\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div>\n      <label for=\"publicationDate\">Publication date: </label>\n      <input type=\"date\" [formControl]=\"publication_date\" />\n      <div\n        *ngIf=\"publication_date.errors && isValidForm != null && !isValidForm\"\n        [ngClass]=\"'error'\"\n      >\n        <div *ngIf=\"publication_date.errors.required\">\n          Publication date is required\n        </div>\n      </div>\n    </div>\n\n    <div>\n      <label for=\"categories\">Choose categories:</label>\n      <select multiple [formControl]=\"categories\">\n        <option\n          *ngFor=\"let category of categoriesList\"\n          [ngValue]=\"category.categoryId\"\n        >\n          {{ category.title }}\n        </option>\n      </select>\n    </div>\n\n    <button type=\"submit\">SAVE</button>\n  </form>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}