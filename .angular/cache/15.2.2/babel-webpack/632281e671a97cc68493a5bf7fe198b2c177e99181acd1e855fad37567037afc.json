{"ast":null,"code":"import { createReducer, on } from '@ngrx/store';\nimport { createPost, createPostFailure, createPostSuccess, deletePost, deletePostFailure, deletePostSuccess, dislikePost, dislikePostFailure, dislikePostSuccess, getPostById, getPostByIdFailure, getPostByIdSuccess, getPosts, getPostsByUserId, getPostsByUserIdFailure, getPostsByUserIdSuccess, getPostsFailure, getPostsSuccess, likePost, likePostFailure, likePostSuccess, updatePost, updatePostFailure, updatePostSuccess } from '../actions';\nimport { PostDTO } from '../models/post.dto';\nexport const initialState = {\n  posts: new Array(),\n  post: new PostDTO('', '', 0, 0, new Date()),\n  loading: false,\n  loaded: false,\n  error: null\n};\nconst _postsReducer = createReducer(initialState, on(getPostsByUserId, state => ({\n  ...state,\n  loading: true,\n  loaded: false,\n  error: null\n})), on(getPostsByUserIdSuccess, (state, action) => ({\n  ...state,\n  posts: action.posts,\n  loading: false,\n  loaded: true,\n  error: null\n})), on(getPostsByUserIdFailure, (state, {\n  payload\n}) => ({\n  ...state,\n  loading: false,\n  loaded: false,\n  error: {\n    payload\n  }\n})), on(deletePost, state => ({\n  ...state,\n  loading: true,\n  loaded: false,\n  error: null\n})), on(deletePostSuccess, (state, {\n  postId\n}) => ({\n  ...state,\n  posts: [...state.posts.filter(post => post.postId !== postId)],\n  loading: false,\n  loaded: true,\n  error: null\n})), on(deletePostFailure, (state, {\n  payload\n}) => ({\n  ...state,\n  loading: false,\n  loaded: false,\n  error: {\n    payload\n  }\n})), on(getPostById, state => ({\n  ...state,\n  loading: true,\n  loaded: false,\n  error: null\n})), on(getPostByIdSuccess, (state, action) => ({\n  ...state,\n  post: action.post,\n  loading: false,\n  loaded: true,\n  error: null\n})), on(getPostByIdFailure, (state, {\n  payload\n}) => ({\n  ...state,\n  loading: false,\n  loaded: false,\n  error: {\n    payload\n  }\n})), on(createPost, state => ({\n  ...state,\n  loading: true,\n  loaded: false,\n  error: null\n})), on(createPostSuccess, (state, action) => ({\n  ...state,\n  post: action.post,\n  loading: false,\n  loaded: true,\n  error: null\n})), on(createPostFailure, (state, {\n  payload\n}) => ({\n  ...state,\n  loading: false,\n  loaded: false,\n  error: {\n    payload\n  }\n})), on(updatePost, state => ({\n  ...state,\n  loading: true,\n  loaded: false,\n  error: null\n})), on(updatePostSuccess, (state, action) => ({\n  ...state,\n  post: action.post,\n  loading: false,\n  loaded: true,\n  error: null\n})), on(updatePostFailure, (state, {\n  payload\n}) => ({\n  ...state,\n  loading: false,\n  loaded: false,\n  error: {\n    payload\n  }\n})), on(getPosts, state => ({\n  ...state,\n  loading: true,\n  loaded: false,\n  error: null\n})), on(getPostsSuccess, (state, action) => ({\n  ...state,\n  posts: action.posts,\n  loading: false,\n  loaded: true,\n  error: null\n})), on(getPostsFailure, (state, {\n  payload\n}) => ({\n  ...state,\n  loading: false,\n  loaded: false,\n  error: {\n    payload\n  }\n})), on(likePost, state => ({\n  ...state,\n  loading: true,\n  loaded: false,\n  error: null\n})), on(likePostSuccess, (state, action) => ({\n  ...state,\n  posts: [...state.posts.map(post => {\n    if (post.postId === action.postId) {\n      return {\n        ...post,\n        num_likes: post.num_likes + 1\n      };\n    } else {\n      return post;\n    }\n  })],\n  loading: false,\n  loaded: true,\n  error: null\n})), on(likePostFailure, (state, {\n  payload\n}) => ({\n  ...state,\n  loading: false,\n  loaded: false,\n  error: {\n    payload\n  }\n})), on(dislikePost, state => ({\n  ...state,\n  loading: true,\n  loaded: false,\n  error: null\n})), on(dislikePostSuccess, (state, action) => ({\n  ...state,\n  posts: [...state.posts.map(post => {\n    if (post.postId === action.postId) {\n      return {\n        ...post,\n        num_dislikes: post.num_dislikes + 1\n      };\n    } else {\n      return post;\n    }\n  })],\n  loading: false,\n  loaded: true,\n  error: null\n})), on(dislikePostFailure, (state, {\n  payload\n}) => ({\n  ...state,\n  loading: false,\n  loaded: false,\n  error: {\n    payload\n  }\n})));\nexport function postsReducer(state, action) {\n  return _postsReducer(state, action);\n}","map":{"version":3,"names":["createReducer","on","createPost","createPostFailure","createPostSuccess","deletePost","deletePostFailure","deletePostSuccess","dislikePost","dislikePostFailure","dislikePostSuccess","getPostById","getPostByIdFailure","getPostByIdSuccess","getPosts","getPostsByUserId","getPostsByUserIdFailure","getPostsByUserIdSuccess","getPostsFailure","getPostsSuccess","likePost","likePostFailure","likePostSuccess","updatePost","updatePostFailure","updatePostSuccess","PostDTO","initialState","posts","Array","post","Date","loading","loaded","error","_postsReducer","state","action","payload","postId","filter","map","num_likes","num_dislikes","postsReducer"],"sources":["/Users/pierre-antoinetremblay/Desktop/blog-uoc-project-front/src/app/Post/reducers/post.reducer.ts"],"sourcesContent":["import { Action, createReducer, on } from '@ngrx/store';\r\nimport {\r\n  createPost,\r\n  createPostFailure,\r\n  createPostSuccess,\r\n  deletePost,\r\n  deletePostFailure,\r\n  deletePostSuccess,\r\n  dislikePost,\r\n  dislikePostFailure,\r\n  dislikePostSuccess,\r\n  getPostById,\r\n  getPostByIdFailure,\r\n  getPostByIdSuccess,\r\n  getPosts,\r\n  getPostsByUserId,\r\n  getPostsByUserIdFailure,\r\n  getPostsByUserIdSuccess,\r\n  getPostsFailure,\r\n  getPostsSuccess,\r\n  likePost,\r\n  likePostFailure,\r\n  likePostSuccess,\r\n  updatePost,\r\n  updatePostFailure,\r\n  updatePostSuccess,\r\n} from '../actions';\r\nimport { PostDTO } from '../models/post.dto';\r\n\r\nexport interface PostsState {\r\n  posts: PostDTO[];\r\n  post: PostDTO;\r\n  loading: boolean;\r\n  loaded: boolean;\r\n  error: any;\r\n}\r\n\r\nexport const initialState: PostsState = {\r\n  posts: new Array<PostDTO>(),\r\n  post: new PostDTO('', '', 0, 0, new Date()),\r\n  loading: false,\r\n  loaded: false,\r\n  error: null,\r\n};\r\n\r\nconst _postsReducer = createReducer(\r\n  initialState,\r\n  on(getPostsByUserId, (state) => ({\r\n    ...state,\r\n    loading: true,\r\n    loaded: false,\r\n    error: null,\r\n  })),\r\n  on(getPostsByUserIdSuccess, (state, action) => ({\r\n    ...state,\r\n    posts: action.posts,\r\n    loading: false,\r\n    loaded: true,\r\n    error: null,\r\n  })),\r\n  on(getPostsByUserIdFailure, (state, { payload }) => ({\r\n    ...state,\r\n    loading: false,\r\n    loaded: false,\r\n    error: { payload },\r\n  })),\r\n  on(deletePost, (state) => ({\r\n    ...state,\r\n    loading: true,\r\n    loaded: false,\r\n    error: null,\r\n  })),\r\n  on(deletePostSuccess, (state, { postId }) => ({\r\n    ...state,\r\n    posts: [...state.posts.filter((post) => post.postId !== postId)],\r\n    loading: false,\r\n    loaded: true,\r\n    error: null,\r\n  })),\r\n  on(deletePostFailure, (state, { payload }) => ({\r\n    ...state,\r\n    loading: false,\r\n    loaded: false,\r\n    error: { payload },\r\n  })),\r\n  on(getPostById, (state) => ({\r\n    ...state,\r\n    loading: true,\r\n    loaded: false,\r\n    error: null,\r\n  })),\r\n  on(getPostByIdSuccess, (state, action) => ({\r\n    ...state,\r\n    post: action.post,\r\n    loading: false,\r\n    loaded: true,\r\n    error: null,\r\n  })),\r\n  on(getPostByIdFailure, (state, { payload }) => ({\r\n    ...state,\r\n    loading: false,\r\n    loaded: false,\r\n    error: { payload },\r\n  })),\r\n  on(createPost, (state) => ({\r\n    ...state,\r\n    loading: true,\r\n    loaded: false,\r\n    error: null,\r\n  })),\r\n  on(createPostSuccess, (state, action) => ({\r\n    ...state,\r\n    post: action.post,\r\n    loading: false,\r\n    loaded: true,\r\n    error: null,\r\n  })),\r\n  on(createPostFailure, (state, { payload }) => ({\r\n    ...state,\r\n    loading: false,\r\n    loaded: false,\r\n    error: { payload },\r\n  })),\r\n  on(updatePost, (state) => ({\r\n    ...state,\r\n    loading: true,\r\n    loaded: false,\r\n    error: null,\r\n  })),\r\n  on(updatePostSuccess, (state, action) => ({\r\n    ...state,\r\n    post: action.post,\r\n    loading: false,\r\n    loaded: true,\r\n    error: null,\r\n  })),\r\n  on(updatePostFailure, (state, { payload }) => ({\r\n    ...state,\r\n    loading: false,\r\n    loaded: false,\r\n    error: { payload },\r\n  })),\r\n  on(getPosts, (state) => ({\r\n    ...state,\r\n    loading: true,\r\n    loaded: false,\r\n    error: null,\r\n  })),\r\n  on(getPostsSuccess, (state, action) => ({\r\n    ...state,\r\n    posts: action.posts,\r\n    loading: false,\r\n    loaded: true,\r\n    error: null,\r\n  })),\r\n  on(getPostsFailure, (state, { payload }) => ({\r\n    ...state,\r\n    loading: false,\r\n    loaded: false,\r\n    error: { payload },\r\n  })),\r\n  on(likePost, (state) => ({\r\n    ...state,\r\n    loading: true,\r\n    loaded: false,\r\n    error: null,\r\n  })),\r\n  on(likePostSuccess, (state, action) => ({\r\n    ...state,\r\n    posts: [\r\n      ...state.posts.map((post) => {\r\n        if (post.postId === action.postId) {\r\n          return { ...post, num_likes: post.num_likes + 1 };\r\n        } else {\r\n          return post;\r\n        }\r\n      }),\r\n    ],\r\n    loading: false,\r\n    loaded: true,\r\n    error: null,\r\n  })),\r\n  on(likePostFailure, (state, { payload }) => ({\r\n    ...state,\r\n    loading: false,\r\n    loaded: false,\r\n    error: { payload },\r\n  })),\r\n  on(dislikePost, (state) => ({\r\n    ...state,\r\n    loading: true,\r\n    loaded: false,\r\n    error: null,\r\n  })),\r\n  on(dislikePostSuccess, (state, action) => ({\r\n    ...state,\r\n    posts: [\r\n      ...state.posts.map((post) => {\r\n        if (post.postId === action.postId) {\r\n          return { ...post, num_dislikes: post.num_dislikes + 1 };\r\n        } else {\r\n          return post;\r\n        }\r\n      }),\r\n    ],\r\n    loading: false,\r\n    loaded: true,\r\n    error: null,\r\n  })),\r\n  on(dislikePostFailure, (state, { payload }) => ({\r\n    ...state,\r\n    loading: false,\r\n    loaded: false,\r\n    error: { payload },\r\n  }))\r\n);\r\n\r\nexport function postsReducer(\r\n  state: PostsState | undefined,\r\n  action: Action\r\n): PostsState {\r\n  return _postsReducer(state, action);\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}